{
  "hash": "f910d8bb657919a3b808f5b96c348bb3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Untitled\"\noutput: html_document\ndate: \"2025-06-19\"\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(tidytext)\n\ntheme_set(theme_light())\n\nwal_train <- read_csv(\"C:/Users/dell/Desktop/walmart/train/train.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 4617600 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl  (3): store_nbr, item_nbr, units\ndate (1): date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nkey <- read_csv(\"C:/Users/dell/Desktop/walmart/key/key.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 45 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (2): store_nbr, station_nbr\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nweather <- read_csv(\"C:/Users/dell/Desktop/walmart/weather/weather.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 20517 Columns: 20\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (18): tmax, tmin, tavg, depart, dewpoint, wetbulb, heat, cool, sunrise,...\ndbl   (1): station_nbr\ndate  (1): date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwal_train |>\n  mutate(year = year(date)) |>\n  count(year)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 2\n   year       n\n  <dbl>   <int>\n1  2012 1806303\n2  2013 1559439\n3  2014 1251858\n```\n\n\n:::\n\n```{.r .cell-code}\nwal_2012 <- wal_train |>\n  mutate(year = year(date)) |>\n  filter(year == 2012)\n\nwal_2012 |>\n  group_by(store_nbr) |>\n  summarise(total = sum(units)) |>\n  mutate(store_nbr = fct_reorder(factor(store_nbr), total)) |> \n  ggplot(aes(total, store_nbr)) +\n  geom_col() +\n  scale_x_continuous(labels = scales::comma_format())\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train |>\n  group_by(store_nbr) |>\n  summarise(total = sum(units)) |>\n  mutate(store_nbr = fct_reorder(factor(store_nbr), total)) |> \n  ggplot(aes(total, store_nbr)) +\n  geom_col() +\n  scale_x_continuous(labels = scales::comma_format())\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train |> \n  mutate(year = year(date)) |>\n  group_by(store_nbr, year) |>\n  summarise(total = sum(units), .groups = \"drop\") |>\n  mutate(store_nbr = reorder_within(factor(store_nbr), total, year)) |> \n  ggplot(aes(total, store_nbr)) +\n  geom_col() +\n  scale_y_reordered() +\n  scale_x_continuous(labels = scales::comma_format()) +\n  facet_wrap(~year, scales = \"free\")\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-2-3.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train |> \n  mutate(year = year(date),\n         month = month(date, label = TRUE)) |>\n  group_by(store_nbr, year, month) |>\n  summarise(total = sum(units), .groups = \"drop\") |>\n  mutate(store_nbr = reorder_within(factor(store_nbr), total, month)) |> \n  ggplot(aes(total, store_nbr)) +\n  geom_col() +\n  scale_y_reordered() +\n  scale_x_continuous(labels = scales::comma_format()) +\n  facet_wrap(~month, scales = \"free_y\", nrow = 2)\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-2-4.png){width=672}\n:::\n:::\n\n\n\n\n\n\n# items\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwal_train2 <- wal_train |> \n  mutate(store_nbr = factor(store_nbr),\n         item_nbr = factor(item_nbr),\n         year = year(date),\n         month = month(date, label = TRUE))\n\n\nwal_train2 |> \n  group_by(item_nbr, year) |> \n  summarise(total_item = sum(units)) |>\n  mutate(item_nbr = fct_reorder(item_nbr, total_item)) |> \n  ggplot(aes(total_item, item_nbr)) +\n  geom_col() +\n  scale_x_log10() \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'item_nbr'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in scale_x_log10(): log-10 transformation introduced infinite values.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 30 rows containing missing values or values outside the scale range\n(`geom_col()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train2 |> \n  group_by(item_nbr, year) |> \n  summarise(total_item = sum(units), .groups = \"drop\") |>\n  mutate(item_nbr = reorder_within(item_nbr, total_item, year)) |> \n  ggplot(aes(total_item, item_nbr)) +\n  geom_col() +\n  scale_y_reordered() +\n  scale_x_log10() +\n  facet_wrap(~year, scales = \"free\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in scale_x_log10(): log-10 transformation introduced infinite values.\nRemoved 30 rows containing missing values or values outside the scale range\n(`geom_col()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train2 |> \n  group_by(item_nbr, year) |> \n  summarise(total_item = sum(units), .groups = \"drop\") |>\n  ggplot() +\n  geom_line(aes(year, total_item, colour = item_nbr), show.legend = F) +\n  scale_x_continuous(labels = seq(2012, 2014, 1), breaks = seq(2012, 2014, 1)) +\n  scale_y_continuous(labels = scales::comma_format())\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train2 |> \n  group_by(item_nbr, month, year) |> \n  summarise(total_item = sum(units), .groups = \"drop\") |> \n  ggplot() +\n  geom_line(aes(month, total_item, colour = item_nbr, group = item_nbr), show.legend = F) +\n  scale_y_continuous(labels = scales::comma_format()) +\n  facet_wrap(~year)\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-3-4.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train2 |> \n  unite(col = \"date2\", month:year,  sep = \"-\", remove = FALSE) |> \n  mutate(date2 = as.Date(paste0(\"01-\", date2), format = \"%d-%b-%Y\")) |> \n  group_by(item_nbr, date2) |> \n  summarise(total_item = sum(units), .groups = \"drop\") |> \n  ggplot() +\n  geom_line(aes(date2, total_item, colour = item_nbr, group = item_nbr), show.legend = F) +\n  scale_x_date(guide = guide_axis(angle = 30), date_labels = \"%b-%Y\", date_breaks = \"1 month\") +\n  scale_y_continuous(labels = scales::comma_format()) \n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-3-5.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# 2012 data\n\nweather_store <- read_csv(\"C:/Users/dell/Desktop/walmart/weather_store.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 1806303 Columns: 24\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (18): tmax, tmin, tavg, depart, dewpoint, wetbulb, heat, cool, sunrise,...\ndbl   (5): store_nbr, item_nbr, units, year, station_nbr\ndate  (1): date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nwalmart <-\n  wal_train |>\n  mutate(year = year(date)) |>\n  filter(units > 0)|> \n  left_join(key) |> \n  left_join(weather) |> \n  mutate(tavg2 = suppressWarnings(as.numeric(tavg)),\n         preciptotal = suppressWarnings(as.numeric(preciptotal))) |>\n  filter(!is.na(tavg2))|> \n  filter(!is.na(preciptotal))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(store_nbr)`\nJoining with `by = join_by(date, station_nbr)`\n```\n\n\n:::\n\n```{.r .cell-code}\nwalmart2 <-\n  wal_train |>\n  mutate(year = year(date)) |>\n  filter(units > 0)|> \n  left_join(key) |> \n  left_join(weather) |> \n  mutate(tavg2 = suppressWarnings(as.numeric(tavg)),\n         preciptotal = suppressWarnings(as.numeric(preciptotal))) |>\n  filter(!is.na(tavg2))|> \n  filter(!is.na(preciptotal)) |> \n  filter(!is.na(codesum)) |>\n  separate_longer_delim(codesum, delim = \" \") |> \n  mutate(codesum = str_extract_all(codesum, \".{2}\")) |>\n  unnest(codesum)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(store_nbr)`\nJoining with `by = join_by(date, station_nbr)`\n```\n\n\n:::\n\n```{.r .cell-code}\nwalmart2 |> \n  filter(units < 2000) |>\n  ggplot(aes(units)) +\n  geom_histogram() \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\n  scale_x_log10()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<ScaleContinuousPosition>\n Range:  \n Limits:    0 --    1\n```\n\n\n:::\n\n```{.r .cell-code}\nwalmart |>  \n  filter(units < 2000) |> \n  group_by(store_nbr) |> \n  ggplot(aes(tavg2, units)) +\n  geom_point() +\n  facet_wrap(~store_nbr,  scales = \"free_y\")\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n\n```{.r .cell-code}\nwalmart |> \n  filter(units < 2000) |> \n  group_by(store_nbr) |> \n  ggplot(aes(preciptotal, units)) +\n  geom_point() +\n  facet_wrap(~store_nbr,  scales = \"free_y\")\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-4-3.png){width=672}\n:::\n:::\n\n\n\n\n\n\n\n# summary statistics of active inventory performance.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwal_train |> \n  filter(units > 0 & units <2000) |>  \n  mutate(store = glue::glue(\"Store {store_nbr}\")) |> \n  group_by(store) |> \n  ggplot(aes(units, factor(item_nbr))) +\n  geom_boxplot(outlier.shape = 16, outlier.size = 1.5, fill = \"#f8f8f8\", color = \"#88398A\") +\n  coord_flip() +\n  guides(x = guide_axis(angle = 90))\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train |> \n  filter(units > 0) |>  \n  filter(store_nbr %in% seq(1, 5, 1)) |> \n  mutate(store = glue::glue(\"Store {store_nbr}\")) |> \n  group_by(store) |> \n  ggplot(aes(units, factor(item_nbr))) +\n  geom_boxplot(outlier.shape = 16, outlier.size = 1.5, fill = \"#f8f8f8\", color = \"#88398A\") +\n  facet_wrap(~store,  scales = \"free\", nrow = 1) +\n  labs(title = \"Distribution of Units Sold by Item across Stores 1 to 5\",\n       y = \"Item Number\",\n       x = \"Units Sold\") +\n  theme_minimal() + \n  theme(plot.title = element_text(colour = \"#562457\", face = \"bold\", hjust = 0.5),\n        strip.text = element_text(face = \"bold\"), \n        axis.text.y = element_text(size = 6))\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n\n```{.r .cell-code}\nwal_train |> \n  mutate(year = year(date)) |>\n  filter(units > 0) |> \n  filter(store_nbr %in% seq(1, 5, 1)) |> \n  group_by(store_nbr, year) |> \n  ggplot(aes(units, factor(item_nbr))) +\n geom_boxplot(outlier.shape = 16, outlier.size = 1.5, fill = \"#f8f8f8\", color = \"#88398A\") +\n  facet_grid(rows = vars(year), cols = vars(store_nbr), scales = \"free_y\") +\n  labs(title = \"Distribution of Units Sold by Item across Stores 1 to 5\",\n       y = \"Item Number\",\n       x = \"Units Sold\") +\n  #theme_minimal() + \n  theme(plot.title = element_text(colour = \"#562457\", face = \"bold\", hjust = 0.5),\n        strip.text = element_text(face = \"bold\"), \n        axis.text.y = element_text(size = 6))\n```\n\n::: {.cell-output-display}\n![](walmart_files/figure-html/unnamed-chunk-5-3.png){width=672}\n:::\n:::\n",
    "supporting": [
      "walmart_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}