---
title: "Bridging Data and Decision-Making: Data Visualization Techniques with R"
subtitle: "IEEE Nigeria Southeast Subsection"
author: Ifeoma Egbogah
format: 
  rladies-revealjs
incremental: false
embed-resources: true
editor_options: 
  chunk_output_type: console
---

# Drowning in Data, Starving for Insight {.inverse}

## Story: “Too Many Reports, Not Enough Direction”

Let me tell you about Amina.

She worked in customer retention at a mid-sized logistics company. Every Monday, her inbox was flooded with CSV files—customer complaints, delivery delays, package weights, region-wise returns… 

All of it collected diligently by the operations team.

But something was wrong.

Despite the data, customer churn kept rising. Leadership was frustrated. Amina felt helpless.

Until one day, she decided to stop sending spreadsheets and start telling stories with the data.

## 

```{r}
#| echo: false
#| 
library(tidyverse)
library(gameofthrones)
library(ggtext)
library(patchwork)
library(ggalt)
library(gt)

theme_set(theme_minimal())

logistics_data <- read_csv("data/logistics_data.csv") |> 
  janitor::clean_names() |> 
  mutate(date = dmy(glue::glue("1-{month}")),
         month2 = month(date, label = TRUE))  
  
customer_survey <- read_csv("data/customer_survey.csv")|> 
  janitor::clean_names() 

customer_survey <- customer_survey |> 
  mutate(likert_scale = case_when(customer_survey_score >= 1 & customer_survey_score <= 2 ~ "Very Dissatisfied",
                                  customer_survey_score >= 3 & customer_survey_score <= 4 ~ "Dissatisfied",
                                  customer_survey_score >= 5 & customer_survey_score <= 6 ~ "Neutral",
                                  
customer_survey_score >= 7 & customer_survey_score <= 8 ~ "Satisfied",
customer_survey_score >= 9 & customer_survey_score <= 10 ~ "Very Satisfied"))

emissions <- read_csv("data/emissions.csv")  

phd_field <- read_csv("data/phd_field.csv")

medal <- read_csv("data/summer_olympic_medals.csv") |> 
  janitor::clean_names()


```


```{r}
#| echo: false
#| 

data <- logistics_data |> 
  select(-date, -month2) |> 
  head(5) 

clean_names <- names(data) |> 
  (\(x) gsub("_", " ", x))() |>   # Replace underscores
  (\(x) tolower(x))() |>      # Convert to lowercase
  (\(x) tools::toTitleCase(x))() 

data |> 
  knitr::kable(col.names = clean_names, caption = "XYZ Logistics Customer Data") |> 
  kableExtra::kable_paper("hover", full_width = F)

```


```{r}
#| echo: false
#| eval: false

logistics_data <- logistics_data |> 
  mutate(date = dmy(glue::glue("1-{month}")),
         month2 = month(date, label = TRUE))  





logistics_data |> 
  mutate(region = str_replace(region, "-", " "),
         region = fct_reorder(region, customer_complaints),
         month2 = factor(month2, levels = c("Jan", "Feb", "Mar", "Apr", "May", "Jun")),
         month2 = fct_rev(month2) 
         ) |> 
  ggplot(aes(customer_complaints, region)) +
  geom_col(aes(colour = month2, fill = month2), position = position_dodge()) 
  


logistics_data |> 
  mutate(region = str_replace(region, "-", " "),
         region = fct_reorder(region, customer_complaints),
         month2 = fct_rev(month2)) |> 
  group_by(month2) |> 
  reframe(total = sum(returns),
            percent = returns/total,
            returns = returns,
            region = region) |>  
  ggplot(aes(percent, month2, fill = region)) +
  geom_col() +
  geom_col(colour ="white") +
  scale_x_continuous(labels = scales::percent_format(), position = "top") +
  scale_fill_got_d(option = "greyjoy", direction = -1) +
  theme_minimal() +
  labs(title = "",
       fill = "Region",
       x = "% of Returns",
       y = "Date")

```


```{r}
#| echo: false
ld <- logistics_data |> 
  mutate(region = str_replace(region, "-", " "),
         region = fct_reorder(region, customer_complaints)) |> 
  group_by(region) |> 
  summarise(total = sum(customer_complaints)) |>
  mutate(region = fct_reorder(region, total)) |> 
  ggplot(aes(total, region)) +
  geom_col(colour = "#4A3F37FF", fill = "#4A3F37FF") +
  geom_col(data = logistics_data |> 
             mutate(region = str_replace(region, "-", " "),
                    region = fct_reorder(region, customer_complaints)) |> 
             group_by(region) |> 
             summarise(total = sum(customer_complaints)) |> 
             filter(region == "North Central"), colour =  "#ECB939FF", fill = "#ECB939FF") +
  geom_text(aes(label = total), nudge_x = -40, colour = "white", fontface = "bold") +
  theme_minimal() +
  labs(y = "Region",
       x = "Total Compliants",
       title = "<b><span style = 'color:#ECB939FF;'>North Central:</span></b> A Hot Spot for Customer Compliants") +
  theme(axis.title.x = element_blank(),
        axis.text.x = element_blank(),
         axis.title.y = element_text(hjust = 0.9),
        plot.title = element_textbox_simple())

```



``` {r}
#| echo: false
ld1 <- logistics_data |> 
  mutate(region = str_replace(region, "-", " "),
         region = fct_reorder(region, customer_complaints)) |> 
  ggplot(aes(date, customer_complaints, group = region)) +
  geom_line(linewidth = 1, colour = "#4A3F37FF") +
  
  geom_line(data = logistics_data |> 
              mutate(region = str_replace(region, "-", " "),
         region = fct_reorder(region, customer_complaints)) |> 
              filter(region == "North Central"),    
             colour =  "#ECB939FF", linewidth = 1) +
  
  geom_text(data = logistics_data |> 
              filter(month2 == "Jun") |> 
               mutate(region = str_replace(region, "-", " "),
         region = fct_reorder(region, customer_complaints)),    
             aes(label = region), nudge_y = 1, nudge_x = 5) +
  
  geom_text(data = logistics_data |> 
              mutate(region = str_replace(region, "-", " "),
         region = fct_reorder(region, customer_complaints)) |> 
           filter(month2 == "Jun" & region == "North Central"),    
             aes(label = region), colour =  "#ECB939FF", nudge_y = 1, nudge_x = 5) +
  
  theme_minimal() +
  coord_fixed(clip = "off") +
  scale_y_continuous(limits = c(0, 160)) +
#  scale_x_date(position = "top") +
  labs(title = "Complaint Trend Watch: A Widening Gap Emerges After Q1",
       subtitle = "With customer complaints rising steadily from March to June, the <b><span style = 'color:#ECB939FF;'>North Central</span></b> region consistently recorded the highest number across all months — signaling persistent service challenges.",
       x = "Date",
       y = "# of Compliants") +
  theme(legend.position = "bottom",
        legend.text.position = "bottom",
        legend.title.position = "top",
        legend.justification.top = "left",
        legend.location = "plot",
        axis.title.y = element_text(hjust = 0.9),
        plot.subtitle = element_textbox_simple(margin = margin(18, 0, 0, 0)))

```


## XYZ Logistics

::: panel-tabset

### Customer Compliant
```{r}

#| echo: false


ld 

```


### Monthly Trend

```{r fig.width=10}

#| echo: false



ld1

```
:::

## XYZ Logistics

::: panel-tabset

### Returns
```{r}
#| echo: false

logistics_data |> 
  mutate(region = str_replace(region, "-", " "),
         region = fct_reorder(region, returns),
        month2 = factor(month2, levels = c("Jan", "Feb", "Mar", "Apr", "May", "Jun")),
         month2 = fct_rev(month2) 
         ) |> 
  ggplot(aes(returns, region)) +
  geom_col(aes(colour = month2, fill = month2), position = position_dodge()) +
  scale_fill_got_d(option = "greyjoy")+
  scale_colour_got_d(option = "greyjoy") +
  labs(title = "",
       y = "Region",
       x ="Returns",
       fill = "Months") +
  theme(axis.title.y = element_text(hjust = 0.9))

```



### Customer Survey
```{r}
#| echo: false


customer_survey |> 
  mutate(likert_scale = factor(likert_scale, levels = c("Very Dissatisfied", "Dissatisfied", "Neutral", "Satisfied", "Very Satisfied"))) |> 
  group_by(region, likert_scale) |> 
  summarise(survey = n(), .groups = "drop") |> 
  group_by(region) |> 
  mutate(total = sum(survey),
         percent = survey/total) |> 
  ggplot() +
  geom_col(aes(percent, region, fill = fct_rev(likert_scale)), show.legend = FALSE) +
  geom_col(aes(percent, region, fill = fct_rev(likert_scale)), colour ="white", show.legend = FALSE) +
  scale_x_continuous(labels = scales::percent_format(), position = "top") +
  scale_fill_got_d(option = "greyjoy", direction = -1,  guide = guide_legend(reverse = T)) +
  labs(title = "Survey Results",
       x = "% of Total",
       y = "Region",
       subtitle = "<b><span style = 'color:#000000FF;'>Very Dissatisfied</span></b> | <b><span style = 'color:#372E29FF;'>Dissatisfied</span></b> | <b><span style = 'color:#726255FF;'>Neutral</span></b> | <b><span style = 'color:#F0C75EFF;'>Satisfied</span></b> | <b><span style = 'color:#ECB939FF;'>Very Satisfied</span></b>",
       fill = "") +
  theme(legend.position = "top",
        legend.text.position = "bottom",
        plot.subtitle = element_textbox_simple(),
        axis.title.y = element_text(hjust = 0.9))
  
  

```
:::

# Why Data Visualization Matters {.inverse}

## No Longer Drowning

-   Humans process visuals 60,000x faster than text

-   Visuals simplify complex data

-   Helps identify trends, outliers, and patterns

-   Supports data-driven decisions

# Data {.inverse}

## What is Data?

Data refers to **raw facts, figures,** and **statistics** that are collected through observation, measurement, research, or experimentation. On their own, data have no meaning until they are organized, analyzed, and interpreted.


### Key Characteristics of Data:

-   **Raw**: Unprocessed and unorganized

-   **Factual:** Based on real-world events, measurements, or records

## Data Types

### **Numerical** or **Quantitative Data**

Numerical (or Quantitative) data refers to data that represents measurable quantities—that is, values that can be counted or measured and expressed in numbers.

:::: columns
::: {.column width="100%"} 

<div style="text-align: center;">
  <img src="images/numerical.png" width="50%">
</div>

:::
::::

## Data Types Contd.

### **Numerical** or **Quantitative Data**


::: columns
::: {.column width="100%"}

<div style="text-align: center; font-size: 0.75em;">
+--------------------------------------------------------+----------------------------------------------------------+
| Continuous Data                                        | Discrete Data                                            |
+========================================================+==========================================================+
| Data that can take **any value within a range**.       | Data that can take only **specific, separate values**.   |
+--------------------------------------------------------+----------------------------------------------------------+
| **Usually measured** (can include decimals/fractions). | **Usually countable** (no decimals)                      |
+--------------------------------------------------------+----------------------------------------------------------+
| **Examples:**                                          | **Examples:**                                            |
|                                                        |                                                          |
| -    Height of a person (e.g., 1.75 meters)            | -    Number of employees in a company (e.g., 15, 23, 50) |
|                                                        |                                                          |
| -    Temperature (e.g., 36.6°C)                        | -    Number of students in a classroom                   |
|                                                        |                                                          |
| -    Sales revenue (e.g., ₦1,254,500.75)               | -    Number of cars sold in a day                        |
+--------------------------------------------------------+----------------------------------------------------------+
</div>
:::
:::

## Data Types Contd.

### Key Features of Numerical Data:
- Can be compared, ordered, added, or averaged

- Suitable for mathematical and statistical analysis

- Often visualized using bar charts, histograms, line graphs, or scatter plots



## Data Types Contd.

### **Categorical** or **Qualitative Data**

Categorical (or Qualitative) data refers to data that describes qualities or characteristics. Instead of numbers, it uses labels, names, or categories to represent information.


:::: columns
::: {.column width="100%"}

<div style="text-align: center;">
  <img src="images/categorical.png" width="50%">
</div>
:::
::::

## Data Types Contd.

### Key Feature of Categorical Data:
- Descriptive rather than numerical

- Used to classify or group data

- Cannot be meaningfully added, subtracted, or averaged

- Can be visualized using bar charts, pie charts, or tables



## Choosing the appropriate graph(s) for the data

So before any visualisation always consider:

- Discrete & continuous quantities
- Categeories

# Effective Visualization Techniques {.inverse}

## Simple Text

<div style="font-size: 0.75em;">
When you’re dealing with just one or two figures, using plain text can often be the most effective way to share them. 

To illustrate, the figure below appeared in an April 2014 report by the Pew Research Center focusing on stay-at-home mothers.
</div>

:::: columns
::: {.column width="100%"}

<div style="text-align: center;">
  <img src="images/pew.jpg" width="28%">
</div>

:::
::::


## Simple Text

In this instance, a straightforward sentence does the job: in 2012, 20% of children had a traditional stay-at-home mother, down from 41% in 1970 or present it visually as below.


:::: columns
::: {.column width="100%"}

<div style="text-align: center;">
  <img src="images/stay.jpg" width="40%">
</div>

:::
::::

## Tables

<div style = "font-size: 0.75em;">
* Engage our **verbal system** — we read them like text.
* Ideal for **scanning rows and columns** to compare specific values.
* Best for **mixed audiences** — each person can locate their row or column of interest.
* Handle **multiple units of measure** better than graphs (e.g., percentages, currency, counts).
* Preserve **exact figures** for precision-focused communication.
</div>

```{r}


logistics_data |> 
  select(region, month2, average_delivery_delay_days) |> 
  pivot_wider(names_from = month2, values_from = average_delivery_delay_days) |> 
  gt(rowname_col = "region") |> 
  tab_stubhead(label = "") |> 
  tab_header(title = md("**Regional Breakdown of Average Delivery Delays**")) 
  
```


## Tables That Talk: Making Your Data Shine

<div style="font-size: 0.75em;">

* The **table design should be subtle**—don’t let it distract.
* Use **light borders** or **white space** to separate rows and columns.
* Avoid **heavy gridlines**, bold shading, or intense colours.
* Keep fonts clean and consistent; emphasize only what matters (e.g., bold totals or key values).
* The goal: **data takes center stage**, not the formatting.
</div>


:::: columns
::: {.column width="100%"}

<div style="text-align: center;">
  <img src="images/table.jpg" width="90%">
</div>

:::
::::


## Heatmaps

<div style = "font-size: 0.75em;">
A heatmap transforms a table of numbers into a visual experience by using color to represent the size or intensity of values. Instead of relying solely on digits, it fills each cell with varying shades—making patterns, trends, and outliers instantly easier to spot.
</div>

```{r}
#| echo: false

logistics_data |> 
  ggplot() +
  geom_tile(aes(month2, region, fill = average_delivery_delay_days), show.legend = FALSE) +
  geom_text(aes(month2, region, label = average_delivery_delay_days), colour = "white", fontface = "bold", size = 7) +
  scale_fill_got(option = "greyjoy", direction = -1) +
  theme_minimal() +
  labs(x = "Month",
       y = " ",
       fill = "Delay Days",
       title = "Regional Breakdown of Average Delivery Delays",
       subtitle = "<b><span style = 'color:#ECB939FF;'>LOW</span></b>-<b><span style = 'color:#000000FF;'>HIGH</span></b>") +
  theme(plot.subtitle = element_textbox_simple(),
        plot.title = element_text(size = 18),
        axis.title = element_text(size = 16),
        axis.text = element_text(size = 13))



```

## Colouring Your Way to Clarity

* Reduces cognitive load by turning numbers into visual cues.

* Color intensity helps the eye quickly identify patterns and outliers.

* In a heatmap, darker (more saturated) colors indicate higher values.

* Makes it faster and easier to spot key data points—like the lowest (5) and highest (24) values.

* Unlike plain tables, visual cues guide attention to areas of interest without extra mental effort.

## Graphs

<div style = "font-size: 0.75em;">
Unlike tables, graphs tap into our visual perception, allowing us to grasp patterns and insights much faster. A thoughtfully crafted graph often communicates key messages more quickly than even the best-designed table.

There are countless types of graphs. They are 
typically grouped into four main categories: 

* points 

* lines 

* bars 

* area charts. 

These core graph styles cover a wide range of everyday data visualization needs.
</div>

## Points
### Scatterplot

<div style = "font-size: 0.75em;">
A scatterplot is a simple yet powerful chart type used to show the relationship between two numerical variables. 

#### Why Scatterplots Matter in Storytelling:

* Reveal relationships: Scatterplots help uncover patterns, trends, and correlations that might otherwise remain hidden in raw data.

* Spot outliers: Unusual points stand out visually, making it easy to identify exceptions or anomalies worth further investigation.

* Show clusters: When data points form groups, it may hint at sub-categories or behaviors within the data.

* Support evidence: In data-driven storytelling, scatterplots visually reinforce claims like “as X increases, Y decreases.”
</div>

## Carbon Majors

<div style = "font-size: 0.75em;">
To better understand scatterplot we will explore the historical emissions data from [Carbon Majors](https://carbonmajors.org/).

> Carbon Majors is a database of historical production data from 122 of the world’s largest oil, gas, coal, and cement producers. This data is used to quantify the direct operational emissions and emissions from the combustion of marketed products that can be attributed to these entities. These entities include:

> 75 Investor-owned Companies, 36 State-owned Companies, 11 Nation States, 82 Oil Producing Entities, 81 Gas Entities, 49 Coal Entities, 6 Cement Entities

> The data spans back to 1854 and contains over 1.42 trillion tonnes of CO2 emissions covering 72% of global fossil fuel and cement emissions since the start of the Industrial Revolution in 1751.

</div>

```{r}

emissions <- read_csv('data/emissions.csv')

```

## Scatterplots

:::: panel-tabset

### Oil & Gas

```{r}

emissions |> 
 filter(commodity %in% c("Oil & NGL", "Natural Gas")) |> 
  mutate(decade = (year %/% 10) * 10) |> 
  ggplot(aes(production_value, total_emissions_MtCO2e)) +
  geom_jitter(position = position_jitter(width = 150, height = 100), alpha = 0.5, size = 3) +
  facet_wrap(~commodity, scales = "free_x") +
  theme_minimal() +
  labs(x = "Production Value",
       y = "CO<sub>2</sub> Emission",
       title = "Emissions Rise in Lockstep with Production—A Tale of Two Fossil Fuels") +
  theme(axis.title.y = element_markdown(hjust = 0.9))
  
```


### By Decade

```{r}

emissions |> 
 filter(commodity %in% c("Oil & NGL", "Natural Gas")) |> 
  mutate(decade = (year %/% 10) * 10) |> 
  ggplot(aes(production_value, total_emissions_MtCO2e, colour = decade)) +
  geom_jitter(position = position_jitter(width = 150, height = 100), alpha = 0.5, size = 3) +
  scale_color_got(option = "greyjoy", breaks = seq(1850, 2020, 20)) +
  facet_wrap(~commodity, scales = "free_x") +
  labs(x = "Production Value",
       y = "CO<sub>2</sub> Emission",
       colour = "Year",
       title = "Emissions Rise in Lockstep with Production—A Tale of Two Fossil Fuels",
       subtitle = "Mid-20th century: Breakthroughs in exploration tech led to massive oil field discoveries (Ghawar, Burgan, Cantarell). This drove a steady increase in global oil and natural gas production. Since the 2000s, fewer 'elephant' oil fields have been found. But production didn’t fall immediately—why? We’re no longer discovering more oil—we’re just getting better at extracting what’s left.") +
  theme(axis.title.y = element_markdown(hjust = 0.9),
        plot.subtitle = element_textbox_simple(margin = margin(2, 0, 8, 0, unit = "mm")))
  
```

### State vs Private

```{r}

```

### NNPC

```{r}

emissions |> 
 filter(commodity %in% c("Oil & NGL", "Natural Gas"),
        parent_entity == "Nigerian National Petroleum Corp.") |> 
  mutate(decade = (year %/% 10) * 10) |> 
  ggplot(aes(production_value, total_emissions_MtCO2e, colour = decade)) +
  geom_jitter(position = position_jitter(width = 5, height = 5), alpha = 0.5, size = 3) +
  scale_color_got(option = "greyjoy", breaks = seq(1960, 2020, 10)) +
  facet_wrap(~commodity, scales = "free_x") +
  labs(x = "Production Value",
       y = "CO<sub>2</sub> Emission",
       colour = "Year",
       title = "Boom Years and Carbon Cost",
       subtitle = "CO<sub>2</sub> emissions have climbed alongside fossil fuel production in Nigeria—especially in recent decades—with natural gas showing the steepest rise.") +
    theme(axis.title.y = element_markdown(hjust = 0.9),
          plot.subtitle = element_textbox_simple())


```


::::



## Lines
### Line Graph

## Olympic Medals

:::: columns
::: {.column width="100%"}

<div style="text-align: center;">
  <img src="images/ireland.png" width="50%">
</div>

:::
::::

## Ireland's Olympic Medals

:::: columns
::: {.column width="100%"}

```{r}

medal2 <- medal |> 
  group_by(year, country_name) |> 
  rowwise() |> 
  mutate(medals = sum(c_across(gold:bronze))) 

ireland <- medal2 |> 
  group_by(year) |> 
  arrange(desc(gold), desc(silver), desc(bronze)) |> 
  mutate(rank = min_rank(-gold * 1e6 - silver * 1e3 - bronze)) |>
  filter(country_name == "Ireland" & year >= 2000) |> 
  unite("host", host_city, year, sep = "\n", remove = FALSE) 

ire_2024 <- tibble(host = c("Athens\n2004", "Paris\n2024"),
                   year = c(2004, 2024),
                   host_country = c("Greece", "France"),
                   host_city = c("Athens", "Paris"),
                   country_name = c("Ireland","Ireland"),
                   country_code = c("IRL", "IRL"),
                   gold = c(0, 4),
                   silver = c(0, 0),
                   bronze = c(0, 3),
                   medals = c(0, 7),
                   rank = c(NA, 19))

ireland <- bind_rows(ireland, ire_2024)


add_suffix <- function(x) {
  if(is.na(x)) {
    return(NA)
  } else if(x %% 10 == 1){
    return(paste0(x, "st"))
  } else if(x %% 10 == 2){
    return(paste0(x, "nd"))
  } else if(x %% 10 == 3){
    return(paste0(x, "rd"))
  } else if(x %% 100 >= 11 && x %% 100 <= 13){
    return(paste0(x, "th"))
  } else {
    return(paste0(x, "th"))
  }
}

x_axis <- ireland |> 
  arrange(year) |> 
  select(host)
  

ireland |> 
  ggplot(aes(year, rank)) +
  geom_line(linewidth = 1.2) +
  geom_point(size = 2) +
  geom_text(aes(label = sapply(rank, add_suffix)), nudge_y = 5) +
  geom_text(data = ireland |> 
              filter(year == 2004),
            aes(2004, 60, label = "No\nMedal")) +
  scale_y_reverse(limits = c(70,0)) +
  scale_x_continuous(breaks = seq(2000, 2025, 4), labels = x_axis$host) +
  labs(x = "Year",
       y = "Rank",
       title = "Ireland's Olympic Success Story") +
  theme(axis.title.y = element_text(hjust = 0.9),
        axis.title.x = element_text(hjust = 0.5))
  

```


:::
::::


## PhDs Awards

<div style = "font-size: 0.75em;">
Line graph can show a single series of data, two series of data, or multiple series. To illustrate we will use data collected by the US gov on all doctoral degree graduates every year. The data comes from the [NSF](https://ncses.nsf.gov/pubs/nsf19301/data). 
</div>

:::: panel-tabset

### Single

```{r}

phd_field |> 
  filter(broad_field == "Life sciences") |> 
  group_by(year) |> 
  summarise(total = sum(n_phds, na.rm = TRUE)) |> 
  ggplot() +
  geom_line(aes(year, total), size = 1.2, colour = "#372E29FF") +
  geom_point(aes(year, total), size = 2, colour = "#372E29FF") +
  scale_x_continuous(breaks = seq(2008, 2017, 1)) +
  scale_y_continuous(limits = c(0, 22500)) +
  labs(x = "Year",
       y = "Total PhD Awards",
       title = "Total PhD Awards in Life Sciences (2008–2017)")
    

```

### Two

```{r}


phd_field |> 
  filter(broad_field %in% c("Life sciences", "Engineering")) |> 
  group_by(year, broad_field) |> 
  summarise(total = sum(n_phds, na.rm = TRUE)) |> 
  ggplot() +
  geom_line(aes(year, total, colour = broad_field), size = 1.2) +
  geom_point(aes(year, total, colour = broad_field), size = 2) +
  scale_x_continuous(breaks = seq(2008, 2017, 1)) +
  scale_y_continuous(limits = c(0, 22500)) +
  scale_colour_got_d(option = "greyjoy") +
  labs(x = "Year",
       y = "Total PhD Awards",
       colour = "Faculty",
       title = "Total PhD Awards in Life Sciences and Engineering (2008–2017)") +
  theme(axis.title.y = element_text(hjust = 0.9))

    
```

### Multiple

```{r}


phd_field |> 
  group_by(year, broad_field) |> 
  summarise(total = sum(n_phds, na.rm = TRUE)) |> 
  ggplot() +
  geom_line(data = phd_field |>
              filter(broad_field == "Life sciences") |> 
              group_by(year) |> 
              summarise(total = sum(n_phds, na.rm = TRUE)),
            aes(year, total), colour = "#ECB939FF", size = 1.2) +
  
   geom_point(data = phd_field |>
              filter(broad_field == "Life sciences") |> 
              group_by(year) |> 
              summarise(total = sum(n_phds, na.rm = TRUE)),
            aes(year, total), colour = "#ECB939FF", size = 2) +
  
   geom_text(data = phd_field |>
              filter(broad_field == "Life sciences", year == 2017) |> 
              group_by(year, broad_field) |> 
              summarise(total = sum(n_phds, na.rm = TRUE)),
            aes(year, total, label = broad_field), colour = "#ECB939FF", nudge_y = 350) +
  
  geom_line(data = phd_field |>
              filter(broad_field != "Life sciences") |> 
              group_by(year, broad_field) |> 
              summarise(total = sum(n_phds, na.rm = TRUE)),
            aes(year, total, group = broad_field), colour = "#372E29FF", size = 1.2, show.legend = FALSE) +

  geom_point(data = phd_field |>
              filter(broad_field != "Life sciences") |> 
              group_by(year, broad_field) |> 
              summarise(total = sum(n_phds, na.rm = TRUE)),
            aes(year, total, group = broad_field), colour = "#372E29FF", size = 2, show.legend = FALSE) +

  geom_text(data = phd_field |> 
              filter(year == 2017, broad_field != "Life sciences") |> 
              group_by(year, broad_field) |> 
              summarise(total = sum(n_phds, na.rm = TRUE)), 
            aes(year, total, label = broad_field), nudge_y = 450, nudge_x = 0.2) +
  
  scale_x_continuous(breaks = seq(2008, 2022, 1)) +
  scale_y_continuous(limits = c(0, 22500), labels = scales::comma_format()) +
  theme_minimal() +
  labs(x = "Year",
       y = "Total PhD Awards",
       colour = "Faculty",
       title = "Total PhD Awards from 2008 to 2017)") +
  theme(axis.title.y = element_text(hjust = 0.9))


```

::::

## Caution: Small differences appear more dramatic

```{r}

phd_field |> 
  filter(broad_field == "Life sciences") |> 
  group_by(year) |> 
  summarise(total = sum(n_phds, na.rm = TRUE)) |> 
  ggplot() +
  geom_line(aes(year, total), size = 1.8, colour = "#372E29FF") +
  scale_x_continuous(breaks = seq(2008, 2017, 1)) +
  labs(x = "Year",
       y = "Total PhD Awards",
       title = "Total PhD Awards in Life Sciences (2008–2017)")

```


## Slopegraph

<div style = "font-size = 0.75em;">
Slopegraphs can be useful when you have two time periods or points of comparison and want to quickly show relative increases and decreases or differences across various categories between the two data points.
</div>

:::: panel-tabset

### Code 1


```{r}

phd_field |>
  filter(year %in% c(2008, 2017)) |> 
  group_by(broad_field, year) |> 
  summarise(total = sum(n_phds, na.rm = TRUE)) |> 
  ggplot(aes(year, total, group = broad_field)) +
  geom_line() +
  geom_text(data = phd_field |>
              filter(year %in% c(2008)) |> 
              group_by(broad_field, year) |> 
              summarise(total = sum(n_phds, na.rm = TRUE)),
            aes(label = total)) +
  geom_text(data = phd_field |>
              filter(year %in% c(2017)) |> 
              group_by(broad_field, year) |> 
              summarise(total = sum(n_phds, na.rm = TRUE)),
            aes(label = total)) +
  scale_x_continuous(breaks = c(2008, 2017)) 
    labs(title = "PhD Awarded from 2008 to 2017 in the USA",
       x = "Number of PhD",
       y = "Field/Faulty",
       caption = "Data: NSF • Viz: Ifeoma Egbogah")

```

### PhD Awards


```{r}



```


### Code 2

```{r}
#| echo: true

depart_total <- phd_field |> 
  group_by(broad_field, major_field) |> 
  summarise(phd_total = sum(n_phds, na.rm = TRUE), .groups = "drop") |>
  mutate(major_field = fct_reorder(major_field, phd_total)) |> 
  ggplot(aes(phd_total, major_field)) +
  geom_col() +
  scale_x_continuous(labels = scales::comma_format()) +
  labs(x = "Number of PhD",
       y = "Department",
       title = "Total Number of PhDs Awarded by Departments from 2008 to 2017",
        caption = "Data: NSF • Viz: Ifeoma Egbogah")


```

### Depart. Total

```{r}

depart_total

```

### Code 3
```{r}

phd_by_year <- phd_field |> 
 # filter(year %in% seq(2008, 2010, 1)) |> 
  group_by(major_field, year) |> 
  summarise(phd_total = sum(n_phds, na.rm = TRUE), .groups = "drop") |>
  mutate(major_field = fct_reorder(major_field, phd_total)) |> 
  ggplot(aes(phd_total, major_field)) +
  geom_lollipop(horizontal = TRUE, point.size = 2) +
  facet_wrap(~year, nrow = 2) +
  labs(x = "Award Total",
       y = "Department",
       title = "PhD Departmental Awards by Year",
       caption = "Data: NSF • Viz: Ifeoma Egbogah")
  


```


### By year

```{r}
phd_by_year
```


:::

## Type


| Chart Type   | Best For                     |
|--------------|------------------------------|
| Line Chart   | Trends over time             |
| Bar Chart    | Comparing categories         |
| Scatter Plot | Correlations, relationships  |
| Maps         | Geospatial data              |
| Dashboard    | Monitoring KPIs in real-time |

*Tip:* Choose simplicity and clarity over complexity.


# Bridging the Gap Between Data and Decisions {.inverse}

## Mind the Gap

**Problem:** Data is abundant, but insights are scarce.

**Solution:** Visualization bridges the gap between raw data and strategic action.

**Outcome:** Simplifies storytelling and supports real-time decisions.

# What is R and Why Use It? {.inverse}

## R

-   Free and open-source statistical language

-   Used in academia and business

-   Integrates data wrangling, analysis, and visualization

*Key Visualization Packages:*

`ggplot2`

`plotly`

`shiny`

## Data Visualization

:::: columns
::: {.column width="100%"}
<div style="text-align: center;">
  <img src="images/program.png" width="70%">
</div>
:::
::::


